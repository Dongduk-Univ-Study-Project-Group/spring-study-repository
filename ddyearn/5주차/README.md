## 데이터베이스 작업

### 관계형 데이터베이스(Relational Database)
관계형 데이터베이스는 데이터를 표 형식을 표현하고, 여러 표에서 항목의 값 사이에 관계를 맺고 있는 데이터베이스를 말한다.
표는 테이블(Table)이라고 부르고 테이블과 테이블 간의 관계를 관계(Relationship)라고 한다.
보통 RDB로 줄여서 부른다.

### 테이블 생성
+ 테이블 : 데이터를 항목으로 해서 이차원 표 형식으로 정리해서 저장한다.
+ 레코드(record) : 테이블의 가로 행(row)
+ 칼럼(column) : 테이블의 세로 열(column)

#### 제약 조건
+ NOT NULL : NULL 입력을 허용하지 않음(필수 입력)
+ UNIQUE : 중복값 입력 허용하지 않음(고유한 값)
+ CHECK : 지정한 조건을 만족하지 않는 값의 입력을 허용하지 않음
+ PRIMARY KEY : 테이블 안에서 레코드를 식별하는 기본키. NOT NULL과 UNIQUE가 함께 적용됨
+ FOREIGN KEY : 관련된 테이블을 연결하는 설정. 외부 키
+ DEFAULT : 칼럼의 초깃값 설정

### SQL
데이터베이스 조작 언어
Structured Query Language(구조화 질의어)
ANSI(American National Standard Institute)와 ISO(국제 표준화 기구)에서 사양이 표준화됨

**CRUD**  
영속적으로 데이터를 취급하는 4개의 기본적인 기능  

CURD | 명령어    | 개요 
--- |--------| ---
생성(Create) | INSERT | 데이터를 등록
읽기(Read) | SELECT | 데이터를 참조
갱신(Update) | UPDATE | 데이터를 갱신
삭제(Delete) | DELETE | 데이터를 삭제

### 엔티티와 리포지토리
**엔티티**  
데이터를 담아두는 객체  
데이터베이스 테이블의 한 행(레코드)에 대응하는 객체  
엔티티의 필드는 테이블의 칼럼값에 대응한다.  
**리포지토리**  
데이터베이스를 조작하는 클래스  
리포지토리 인터페이스의 필드에 리포지토리 구현 클래스를 DI하여 특정 구현에 의존하는 것을 피하기 위해  
반드시 인터페이스를 정의하고 구현해야 한다.

### 스프링 데이터 JDBC
**O/R 매퍼(Object-relational Mapper)**  
애플리케이션에서 사용하는 O(Object):'객체'와 R(Relational):'관계형 데이터베이스'의 데이터를 매핑하는 것
미리 설정됨 객체와 관계형 데이터베이스 간의 대응 관계 정보를 가지고 
인터페이스의 데이터에 대응하는 테이블에 내보내거나
데이터베이스에서 값을 읽어들여 인터페이스에 대입하는 작업을 자동으로 실행한다.

스프링 데이터가 제공하는 CrudRepository를 상속해서 자동으로 CURD를 지원하는 메서드를 사용할 수 있다.

---
## MVC 모델
프로그램의 처리 역할을 나누어서 프로그램을 작성하는 방법

### 모델(Model)
비즈니스 로직(Business Logic) : 시스템의 목적을 처리하는 부분

### 뷰(View)
표현 부분 담당

### 컨트롤러(Controller)
모델과 뷰를 제어
뷰에서 받은 입력을 데이터를 기준으로 모델에 내용 전달. 모델에서 받은 데이터를 뷰에 전달해 화면에 표시.

### MVC 모델의 개요와 이점
+ 역할 분담을 통해 효율적인 개발 가능
+ 개발하는 엔지니어의 분업화가 용이
+ 설계 변경에 유연하게 대응 가능

### 스프링 MVC
웹 애플리케이션을 간단하게 만들 수 있는 기능을 제공하는 프레임워크

#### 스프링 MVC의 구성 요소
+ DispatcherServlet : 모든 요청을 수신하는 프런트 컨트롤러
+ Model : 컨트롤러에서 뷰에 넘겨주는 표시용 데이터 등을 저장하는 객체(HttpServletRequest 나 HttpSession과 같은 기능 제공)
+ 컨트롤러 : 요청에 대응해서 처리할 내용이 있는 곳
+ 서비스 처리 : 데이터베이스에 접속해서 데이터를 취득하거나 데이터를 가공하는 등 여러가지 작업 실행. 개발자가 설계하고 구현한다(스프링 MVC와 관계없음
+ 뷰 : 화면 표시 처리(JSP등의 처리)

**프런트 컨트롤러 패턴(Front Controller Pattern)** 이란 디자인 패턴이라고 하는 설계 패턴의 하나로, 모든 요청을 프런트 컨트롤러가 받아, 그 후 담당하는 컨트롤러에 적절하게 할당하는 설계이다.

#### 요청을 받고 응답을 보낼 때까지의 흐름
1. 프런트 컨트롤러인 DispatcherServlet이 클라이언트로부터 요청을 수신한다.
2. DispatcherServlet이 컨트롤러의 요청 핸들러 메서드를 호출한다.
3. 컨트롤러는 비즈니스 로직 처리를 호출하고 처리결과를 받는다.
4. 컨트롤러가 처리 결과를 모델로 설정하고 뷰 이름을 반환한다.
5. 반환된 뷰 이름을 받아 DispatcherServlet이 뷰 이름에 대응하는 뷰에 대해 화면 표시 처리를 의뢰한다.
6. 클라이언트가 응답을 받고 브라우저에 화면이 표시된다.

개발자가 작성하는 부분은 컨트롤러, 비즈니스 로직 처리, 뷰

