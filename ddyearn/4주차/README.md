## 어노테이션 역할 알아보기

### 어노테이션
1. 어노테이션(annotation)은 주석을 의미하는 영어 표현이다.
2. '@xxx'와 같은 형태로 작성한다.
3. 외부 소프트웨어에 필요한 처리 내용을 전달한다.

### 도메인 주도 설계(Domain-Driven Design)의 레이어
+ 애플리케이션 레이어 (Application Layer) : 클라이언트와의 데이터 입출력을 제어하는 레이어이다.
+ 도메인 레이어 (Domain Layer) : 애플리케이션의 중심이 되는 레이어로서 업무 처리를 수행하는 레이어이다.
+ 인프라스트럭처 레이어 (Infrastructure Layer) : 데이터베이스에 대한 데이터 영속성(Persistence Context) 등을 담당하는 레이어이다.

### 인스턴스 생성 어노테이션은 레이어별로 구분된다.
+ @Controller : 애플리케이션 레이어의 컨트롤러에 부여
+ @Service도메인 : 레이어의 업무처리에 부여
+ @Repository : 인프라 레이어의 데이터베이스 액세스 처리에 부여
+ @Component : @Controller, @Service, @Repository의 용도 이외의 인스턴스 생성 대상 클래스에 부여

### 커스텀 어노테이션
java.lang.Annotation 인터페이스를 상송하고 만든다.  
전용 자바 파일을 생성할 필요가 있다.

## AOP(관점 지향 프로그래밍)
데이터베이스 액세스 처리에는 예외 발생 시 처리하는 내용이 반드시 포함되어야 한다.
예외 처리를 하지 않으면 프로그램이 중지되고 자바의 경우 예외 처리를 프로그램에 포함하지 않으면 컴파일에 실패한다.

### AOP의 고유 용어
+ Advice : 횡단적 관심사의 구현(메서드). 로그 출력 및 트랜잭션 제어 등
+ Aspect : 어드바이스를 정리한 클래스
+ JoinPoint : 어드바이스를 중심적인 관심사에 적용하는 타이밍. 메서드(생성자) 실행 전, 메서드(생성자) 실행 후 등 실행되는 타이밍
+ Pointcut : 어드바이스를 삽입할 수 있는 위치. 예를 들어, 메서드 이름이 get으로 시작할 때만 처리하는 조건을 정의할 수 있다.
+ Interceptor : 처리의 제어를 인터셉트하기 위한 구조 또는 프로그램. 스프링 프레임워크에서는 인터셉트라는 메커니즈으로 어드바이스를 중심 관심사에 추가한것처럼 보이게 한다.
+ Target : 어드바이스가 도입되는 대상

#### 스프링 프레임워크가 제공하는 중심적 관심사에 적용하는 어드바이스의 다섯가지 종류
+ Before Advice : 중심적 관심사가 실행되기 '이전'에 횡단적 관심사를 실행 : @Before
+ After Returning Advice : 중심적 관심사가 '정상적으로 종료된 후'에 횡단적 관심사를 실행 : @AfterReturning
+ After Throwing Advice : 중심적 관심사로부터 '예외가 던져진 후'로 횡단적 관심사를 실행 : @AfterThrowing
+ After Advice : 중심적 관심사의 '실행 후'에 횡단적 관심사를 실행(정상 종료나 예외 종료 등의 결과와 상관없이 실행) : @After
+ Around Advice : 중앙적 관심사 호출 전후에 횡단적 관심사를 실행 : @Around

### 포인트 컷 식
직접 어드바이스를 만드는 경우 패키지, 클래스, 메서드 등 어드바이스 삽입 대상을 조건으로 지정할 수 있다.
지정하는 조건 방법에는 포인트컷 식을 사용한다.
+ execution 지시자의 구문 : 
  + execute(반환값 패키지.클래스.메서드(인수))

+ 와일드카드
  + *(애스터리스크) : 임의의 문자열을 나타내고, 패키지를 나타낼 때는 임의의 패키지 한 계층을 나타낸다. 메서드의 인수에서는 한 개의 인수를 나타내 반환값으로도 이용할 수 있다.
  + ..(점 두 개) : 패키지를 나타내는 경우 0개 이상의 패키지를 나타낸다. 네서드의 인수를 표현하는 경우에는 0개 이상의 임의의 인수를 나타낸다.
  + +(플러스) : 클래스명 뒤에 기술해 클래스와 그 서브클래스 및 구현 클래스 모두를 나타낸다.

### 스프링 프레임워크가 제공하는 AOP 기능
#### @Transactional 어노테이션
트랜잭션 관리에 사용한다. 데이터베이스 액세스 처리 메서드가 정상 종료하면 트랜잭션을 커밋하고 예외가 발생하면 롤백한다.

### 요약
+ AOP에서는 프로그램을 2개의 요소인 중심적 관심사와 횡단적 관심사로 구성되어 있다고 생각한다.
+ 중심적 관심사란 구현해야 할 기능을 나타내는 비즈니스 로직을 말한다.
+ 횡단적 관심사란 본질적인 기능은 아니지만 품질이나 유지보수 등의 관점에서 꼭 필요한 기능을 나타내는 프로그램을 말한다.
+ AOP에서는 횡단적 관심사를 분리함으로써 기존 코드를 수정하지 않아도 프로그램 중에 특정 기능(공통 처리)을 추가할 수 있다.
+ 스프링 프레임워크는 다양한 공통기능을 AOP에서 제공한다.